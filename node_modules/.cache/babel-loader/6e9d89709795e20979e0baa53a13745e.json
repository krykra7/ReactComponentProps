{"ast":null,"code":"\"use strict\";\n\nvar _slicedToArray = require(\"/home/kkrawczyk/Projects/6hxo7u/node_modules/@babel/runtime/helpers/slicedToArray.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useCssAndCx = exports.createCssAndCx = void 0;\n\nvar classnames_1 = require(\"./tools/classnames\");\n\nvar serialize_1 = require(\"@emotion/serialize\");\n\nvar utils_1 = require(\"@emotion/utils\");\n\nvar useGuaranteedMemo_1 = require(\"./tools/useGuaranteedMemo\");\n\nvar cache_1 = require(\"./cache\");\n\nvar types_1 = require(\"./types\");\n\nexports.createCssAndCx = function () {\n  function merge(registered, css, className) {\n    var registeredStyles = [];\n    var rawClassName = (0, utils_1.getRegisteredStyles)(registered, registeredStyles, className);\n\n    if (registeredStyles.length < 2) {\n      return className;\n    }\n\n    return rawClassName + css(registeredStyles);\n  }\n\n  function createCssAndCx(params) {\n    var cache = params.cache;\n\n    var css = function css() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var serialized = (0, serialize_1.serializeStyles)(args, cache.registered);\n      (0, utils_1.insertStyles)(cache, serialized, false);\n      var className = \"\".concat(cache.key, \"-\").concat(serialized.name);\n\n      scope: {\n        var arg = args[0];\n\n        if (!(0, types_1.matchCSSObject)(arg)) {\n          break scope;\n        }\n\n        increaseSpecificityToTakePrecedenceOverMediaQuerries.saveClassNameCSSObjectMapping(cache, className, arg);\n      }\n\n      return className;\n    };\n\n    var cx = function cx() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var className = (0, classnames_1.classnames)(args);\n      var feat27FixedClassnames = increaseSpecificityToTakePrecedenceOverMediaQuerries.fixClassName(cache, className, css);\n      return merge(cache.registered, css, feat27FixedClassnames); //return merge(cache.registered, css, className);\n    };\n\n    return {\n      css: css,\n      cx: cx\n    };\n  }\n\n  return {\n    createCssAndCx: createCssAndCx\n  };\n}().createCssAndCx;\n/** Will pickup the contextual cache if any */\n\n\nfunction useCssAndCx() {\n  var cache = (0, cache_1.useTssEmotionCache)();\n\n  var _ref = (0, useGuaranteedMemo_1.useGuaranteedMemo)(function () {\n    return (0, exports.createCssAndCx)({\n      cache: cache\n    });\n  }, [cache]),\n      css = _ref.css,\n      cx = _ref.cx;\n\n  return {\n    css: css,\n    cx: cx\n  };\n}\n\nexports.useCssAndCx = useCssAndCx; // https://github.com/garronej/tss-react/issues/27\n\nvar increaseSpecificityToTakePrecedenceOverMediaQuerries = function () {\n  var cssObjectMapByCache = new WeakMap();\n  return {\n    \"saveClassNameCSSObjectMapping\": function saveClassNameCSSObjectMapping(cache, className, cssObject) {\n      var cssObjectMap = cssObjectMapByCache.get(cache);\n\n      if (cssObjectMap === undefined) {\n        cssObjectMap = new Map();\n        cssObjectMapByCache.set(cache, cssObjectMap);\n      }\n\n      cssObjectMap.set(className, cssObject);\n    },\n    \"fixClassName\": function () {\n      function fix(classNameCSSObjects) {\n        var isThereAnyMediaQueriesInPreviousClasses = false;\n        return classNameCSSObjects.map(function (_ref2) {\n          var _ref3 = _slicedToArray(_ref2, 2),\n              className = _ref3[0],\n              cssObject = _ref3[1];\n\n          if (cssObject === undefined) {\n            return className;\n          }\n\n          var out;\n\n          if (!isThereAnyMediaQueriesInPreviousClasses) {\n            out = className;\n\n            for (var key in cssObject) {\n              if (key.startsWith(\"@media\")) {\n                isThereAnyMediaQueriesInPreviousClasses = true;\n                break;\n              }\n            }\n          } else {\n            out = {\n              \"&&\": cssObject\n            };\n          }\n\n          return out;\n        });\n      }\n\n      return function (cache, className, css) {\n        var cssObjectMap = cssObjectMapByCache.get(cache);\n        return (0, classnames_1.classnames)(fix(className.split(\" \").map(function (className) {\n          return [className, cssObjectMap === null || cssObjectMap === void 0 ? void 0 : cssObjectMap.get(className)];\n        })).map(function (classNameOrCSSObject) {\n          return typeof classNameOrCSSObject === \"string\" ? classNameOrCSSObject : css(classNameOrCSSObject);\n        }));\n      };\n    }()\n  };\n}();","map":{"version":3,"sources":["/home/kkrawczyk/Projects/6hxo7u/node_modules/tss-react/cssAndCx.js"],"names":["Object","defineProperty","exports","value","useCssAndCx","createCssAndCx","classnames_1","require","serialize_1","utils_1","useGuaranteedMemo_1","cache_1","types_1","merge","registered","css","className","registeredStyles","rawClassName","getRegisteredStyles","length","params","cache","args","serialized","serializeStyles","insertStyles","key","name","scope","arg","matchCSSObject","increaseSpecificityToTakePrecedenceOverMediaQuerries","saveClassNameCSSObjectMapping","cx","classnames","feat27FixedClassnames","fixClassName","useTssEmotionCache","useGuaranteedMemo","cssObjectMapByCache","WeakMap","cssObject","cssObjectMap","get","undefined","Map","set","fix","classNameCSSObjects","isThereAnyMediaQueriesInPreviousClasses","map","out","startsWith","split","classNameOrCSSObject"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.useCssAndCx = exports.createCssAndCx = void 0;\nconst classnames_1 = require(\"./tools/classnames\");\nconst serialize_1 = require(\"@emotion/serialize\");\nconst utils_1 = require(\"@emotion/utils\");\nconst useGuaranteedMemo_1 = require(\"./tools/useGuaranteedMemo\");\nconst cache_1 = require(\"./cache\");\nconst types_1 = require(\"./types\");\nexports.createCssAndCx = (() => {\n    function merge(registered, css, className) {\n        const registeredStyles = [];\n        const rawClassName = (0, utils_1.getRegisteredStyles)(registered, registeredStyles, className);\n        if (registeredStyles.length < 2) {\n            return className;\n        }\n        return rawClassName + css(registeredStyles);\n    }\n    function createCssAndCx(params) {\n        const { cache } = params;\n        const css = (...args) => {\n            const serialized = (0, serialize_1.serializeStyles)(args, cache.registered);\n            (0, utils_1.insertStyles)(cache, serialized, false);\n            const className = `${cache.key}-${serialized.name}`;\n            scope: {\n                const arg = args[0];\n                if (!(0, types_1.matchCSSObject)(arg)) {\n                    break scope;\n                }\n                increaseSpecificityToTakePrecedenceOverMediaQuerries.saveClassNameCSSObjectMapping(cache, className, arg);\n            }\n            return className;\n        };\n        const cx = (...args) => {\n            const className = (0, classnames_1.classnames)(args);\n            const feat27FixedClassnames = increaseSpecificityToTakePrecedenceOverMediaQuerries.fixClassName(cache, className, css);\n            return merge(cache.registered, css, feat27FixedClassnames);\n            //return merge(cache.registered, css, className);\n        };\n        return { css, cx };\n    }\n    return { createCssAndCx };\n})().createCssAndCx;\n/** Will pickup the contextual cache if any */\nfunction useCssAndCx() {\n    const cache = (0, cache_1.useTssEmotionCache)();\n    const { css, cx } = (0, useGuaranteedMemo_1.useGuaranteedMemo)(() => (0, exports.createCssAndCx)({ cache }), [cache]);\n    return { css, cx };\n}\nexports.useCssAndCx = useCssAndCx;\n// https://github.com/garronej/tss-react/issues/27\nconst increaseSpecificityToTakePrecedenceOverMediaQuerries = (() => {\n    const cssObjectMapByCache = new WeakMap();\n    return {\n        \"saveClassNameCSSObjectMapping\": (cache, className, cssObject) => {\n            let cssObjectMap = cssObjectMapByCache.get(cache);\n            if (cssObjectMap === undefined) {\n                cssObjectMap = new Map();\n                cssObjectMapByCache.set(cache, cssObjectMap);\n            }\n            cssObjectMap.set(className, cssObject);\n        },\n        \"fixClassName\": (() => {\n            function fix(classNameCSSObjects) {\n                let isThereAnyMediaQueriesInPreviousClasses = false;\n                return classNameCSSObjects.map(([className, cssObject]) => {\n                    if (cssObject === undefined) {\n                        return className;\n                    }\n                    let out;\n                    if (!isThereAnyMediaQueriesInPreviousClasses) {\n                        out = className;\n                        for (const key in cssObject) {\n                            if (key.startsWith(\"@media\")) {\n                                isThereAnyMediaQueriesInPreviousClasses = true;\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        out = {\n                            \"&&\": cssObject,\n                        };\n                    }\n                    return out;\n                });\n            }\n            return (cache, className, css) => {\n                const cssObjectMap = cssObjectMapByCache.get(cache);\n                return (0, classnames_1.classnames)(fix(className\n                    .split(\" \")\n                    .map(className => [\n                    className,\n                    cssObjectMap === null || cssObjectMap === void 0 ? void 0 : cssObjectMap.get(className),\n                ])).map(classNameOrCSSObject => typeof classNameOrCSSObject === \"string\"\n                    ? classNameOrCSSObject\n                    : css(classNameOrCSSObject)));\n            };\n        })(),\n    };\n})();\n"]},"metadata":{},"sourceType":"script"}